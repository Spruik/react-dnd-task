{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\25359\\\\sp\\\\react-dnd-task\\\\src\\\\components\\\\board.tsx\";\nimport * as React from \"react\";\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\nimport styled from \"styled-components\";\nimport AddTask from \"./AddTask\"; // Import data for board\n\nimport { initialBoardData } from \"../data/board-initial-data\"; // Import BoardColumn component\n\nimport { BoardColumn } from \"./board-column\"; // Create styles board element properties\n\nconst BoardEl = styled.div`\n  display: flex;\n  align-items: flex-start;\n  justify-content: space-between;\n`;\nexport class Board extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: initialBoardData,\n      itemContent: \"\"\n    };\n\n    this.editContent = event => {\n      if (event.key === \"Enter\") {\n        // get edited item\n        let target = event.target;\n        let itemId = target.id;\n        let itemContent = target.value; // updated content of item\n\n        const newState = { ...this.state.data,\n          items: { ...this.state.data.items,\n            [itemId]: {\n              id: itemId,\n              content: itemContent\n            }\n          }\n        };\n        this.setState({\n          data: newState\n        }); // press enter, lose focus\n\n        event.target.blur();\n      }\n    };\n\n    this.addNewTask = () => {\n      // Do nothing if no typing in textField\n      let newTask = document.getElementById(\"add-content\");\n      if (newTask === null) return;\n      let itemContent = newTask.value;\n      if (newTask.value === \"\") return; // auto generate item_id\n\n      let itemIndex = Object.keys(this.state.data.items).length + 1;\n      let itemId = \"item-\" + itemIndex; // put the new added item into column-4 by default\n\n      const columnAdd = this.state.data.columns[\"column-4\"];\n      const newItemsIds = Array.from(columnAdd.itemsIds);\n      newItemsIds.push(itemId);\n      const newColumnAdd = { ...columnAdd,\n        itemsIds: newItemsIds\n      }; // update items\n\n      const newState = { ...this.state.data,\n        items: { ...this.state.data.items,\n          [itemId]: {\n            id: itemId,\n            content: itemContent\n          }\n        },\n        columns: { ...this.state.data.columns,\n          \"column-4\": newColumnAdd\n        }\n      };\n      this.setState({\n        data: newState\n      });\n      console.log(this.state.data);\n    };\n\n    this.onDragEnd = result => {\n      const {\n        source,\n        destination,\n        draggableId\n      } = result;\n      console.log(source.droppableId);\n      console.log(destination.droppableId);\n      if (source.droppableId === \"lalala\" && destination.droppableId !== undefined) return;\n      if (source.droppableId !== undefined && destination.droppableId === \"lalala\") return;\n\n      if (draggableId.includes(\"column\")) {\n        const newcolumnsOrder = this.state.data.columnsOrder;\n        let temp = newcolumnsOrder[source.index];\n        newcolumnsOrder[source.index] = newcolumnsOrder[destination.index];\n        newcolumnsOrder[destination.index] = temp;\n        const newState = { ...this.state.data,\n          columnsOrder: newcolumnsOrder\n        };\n        this.setState({\n          data: newState\n        });\n      }\n\n      if (draggableId.includes(\"item\")) {\n        // Do nothing if item is dropped outside the list\n        if (!destination) {\n          return;\n        } // Do nothing if the item is dropped into the same place\n\n\n        if (destination.droppableId === source.droppableId && destination.index === source.index) {\n          return;\n        } // Find column from which the item was dragged from\n\n\n        const columnStart = this.state.data.columns[source.droppableId]; // Find column in which the item was dropped\n\n        const columnFinish = this.state.data.columns[destination.droppableId]; // Moving items in the same list\n\n        if (columnStart === columnFinish) {\n          // Get all item ids in currently active list\n          const newItemsIds = Array.from(columnStart.itemsIds); // Remove the id of dragged item from its original position\n\n          newItemsIds.splice(source.index, 1); // Insert the id of dragged item to the new position\n\n          newItemsIds.splice(destination.index, 0, draggableId); // Create new, updated, object with data for columns\n\n          const newColumnStart = { ...columnStart,\n            itemsIds: newItemsIds\n          }; // Create new board state with updated data for columns\n\n          const newState = { ...this.state.data,\n            columns: { ...this.state.data.columns,\n              [newColumnStart.id]: newColumnStart\n            }\n          }; // Update the board state with new data\n\n          this.setState({\n            data: newState\n          });\n        } else {\n          // Moving items from one list to another\n          // Get all item ids in source list\n          const newStartItemsIds = Array.from(columnStart.itemsIds); // Remove the id of dragged item from its original position\n\n          newStartItemsIds.splice(source.index, 1); // Create new, updated, object with data for source column\n\n          const newColumnStart = { ...columnStart,\n            itemsIds: newStartItemsIds\n          }; // Get all item ids in destination list\n\n          const newFinishItemsIds = Array.from(columnFinish.itemsIds); // Insert the id of dragged item to the new position in destination list\n\n          newFinishItemsIds.splice(destination.index, 0, draggableId); // Create new, updated, object with data for destination column\n\n          const newColumnFinish = { ...columnFinish,\n            itemsIds: newFinishItemsIds\n          }; // Create new board state with updated data for both, source and destination columns\n\n          const newState = { ...this.state.data,\n            columns: { ...this.state.data.columns,\n              [newColumnStart.id]: newColumnStart,\n              [newColumnFinish.id]: newColumnFinish\n            }\n          }; // Update the board state with new data\n\n          this.setState({\n            data: newState\n          });\n        }\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(DragDropContext, {\n      onDragEnd: this.onDragEnd,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(Droppable, {\n      droppableId: \"lalala\",\n      direction: \"horizontal\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 13\n      }\n    }, (provided, snapshot) => /*#__PURE__*/React.createElement(BoardEl, Object.assign({}, provided.droppableProps, {\n      ref: provided.innerRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }), this.state.data.columnsOrder.map((columnId, index) => {\n      // Get id of the current column\n      const column = this.state.data.columns[columnId]; // Get item belonging to the current column\n\n      const items = column.itemsIds.map(itemId => this.state.data.items[itemId]); // Render the BoardColumn component\n\n      return /*#__PURE__*/React.createElement(BoardColumn, {\n        index: index,\n        key: column.id,\n        column: column,\n        items: items,\n        onkey: this.editContent,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 23\n        }\n      });\n    }), provided.placeholder))), /*#__PURE__*/React.createElement(AddTask, {\n      submitOnClick: this.addNewTask,\n      onkeyup: event => {\n        if (event.key === \"Enter\") this.addNewTask();\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}","map":{"version":3,"sources":["C:/Users/25359/sp/react-dnd-task/src/components/board.tsx"],"names":["React","DragDropContext","Droppable","styled","AddTask","initialBoardData","BoardColumn","BoardEl","div","Board","Component","state","data","itemContent","editContent","event","key","target","itemId","id","value","newState","items","content","setState","blur","addNewTask","newTask","document","getElementById","itemIndex","Object","keys","length","columnAdd","columns","newItemsIds","Array","from","itemsIds","push","newColumnAdd","console","log","onDragEnd","result","source","destination","draggableId","droppableId","undefined","includes","newcolumnsOrder","columnsOrder","temp","index","columnStart","columnFinish","splice","newColumnStart","newStartItemsIds","newFinishItemsIds","newColumnFinish","render","provided","snapshot","droppableProps","innerRef","map","columnId","column","placeholder"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport { DragDropContext, Droppable } from \"react-beautiful-dnd\";\r\nimport styled from \"styled-components\";\r\nimport AddTask from \"./AddTask\";\r\n\r\n// Import data for board\r\nimport { initialBoardData } from \"../data/board-initial-data\";\r\n\r\n// Import BoardColumn component\r\nimport { BoardColumn } from \"./board-column\";\r\n\r\n// Create styles board element properties\r\nconst BoardEl = styled.div`\r\n  display: flex;\r\n  align-items: flex-start;\r\n  justify-content: space-between;\r\n`;\r\n\r\nexport class Board extends React.Component {\r\n  // Initialize board state with board data\r\n  state = { data: initialBoardData, itemContent: \"\" };\r\n\r\n  // Handle edit content of items\r\n  editContent = (event: React.KeyboardEvent<HTMLInputElement>) => {\r\n    if (event.key === \"Enter\") {\r\n      // get edited item\r\n      let target = event.target as HTMLInputElement;\r\n      let itemId = target.id;\r\n      let itemContent = target.value;\r\n      // updated content of item\r\n      const newState = {\r\n        ...this.state.data,\r\n        items: {\r\n          ...this.state.data.items,\r\n          [itemId]: { id: itemId, content: itemContent },\r\n        },\r\n      };\r\n      this.setState({ data: newState });\r\n      // press enter, lose focus\r\n      (event.target as HTMLInputElement).blur();\r\n    }\r\n  };\r\n\r\n  // Handle adding new Tasks\r\n  addNewTask = () => {\r\n    // Do nothing if no typing in textField\r\n    let newTask = document.getElementById(\"add-content\");\r\n    if (newTask === null) return;\r\n    let itemContent = (newTask as HTMLInputElement).value;\r\n    if ((newTask as HTMLInputElement).value === \"\") return;\r\n\r\n    // auto generate item_id\r\n    let itemIndex = Object.keys(this.state.data.items).length + 1;\r\n    let itemId: string = \"item-\" + itemIndex;\r\n\r\n    // put the new added item into column-4 by default\r\n    const columnAdd = (this.state.data.columns as any)[\"column-4\"];\r\n    const newItemsIds = Array.from(columnAdd.itemsIds);\r\n    newItemsIds.push(itemId);\r\n    const newColumnAdd = {\r\n      ...columnAdd,\r\n      itemsIds: newItemsIds,\r\n    };\r\n\r\n    // update items\r\n    const newState = {\r\n      ...this.state.data,\r\n      items: {\r\n        ...this.state.data.items,\r\n        [itemId]: { id: itemId, content: itemContent },\r\n      },\r\n      columns: {\r\n        ...this.state.data.columns,\r\n        \"column-4\": newColumnAdd,\r\n      },\r\n    };\r\n    this.setState({ data: newState });\r\n    console.log(this.state.data);\r\n  };\r\n\r\n  // Handle drag & drop\r\n  onDragEnd = (result: any) => {\r\n    const { source, destination, draggableId } = result;\r\n    console.log(source.droppableId);\r\n    console.log(destination.droppableId);\r\n    if (source.droppableId === \"lalala\" && destination.droppableId !== undefined) return;\r\n    if (source.droppableId !== undefined && destination.droppableId === \"lalala\") return;\r\n    if (draggableId.includes(\"column\")){\r\n      const newcolumnsOrder = this.state.data.columnsOrder;\r\n      let temp = newcolumnsOrder[source.index];\r\n      newcolumnsOrder[source.index] = newcolumnsOrder[destination.index];\r\n      newcolumnsOrder[destination.index] = temp;\r\n      const newState = {\r\n        ...this.state.data,\r\n        columnsOrder:newcolumnsOrder\r\n      };\r\n      this.setState({ data: newState });\r\n\r\n    }\r\n    if (draggableId.includes(\"item\")){\r\n    // Do nothing if item is dropped outside the list\r\n    if (!destination) {\r\n      return;\r\n    }\r\n\r\n    // Do nothing if the item is dropped into the same place\r\n    if (\r\n      destination.droppableId === source.droppableId &&\r\n      destination.index === source.index\r\n    ) {\r\n      return;\r\n    }\r\n    \r\n    // Find column from which the item was dragged from\r\n    const columnStart = (this.state.data.columns as any)[source.droppableId];\r\n\r\n    // Find column in which the item was dropped\r\n    const columnFinish = (this.state.data.columns as any)[\r\n      destination.droppableId\r\n    ];\r\n\r\n    // Moving items in the same list\r\n    if (columnStart === columnFinish) {\r\n      // Get all item ids in currently active list\r\n      const newItemsIds = Array.from(columnStart.itemsIds);\r\n\r\n      // Remove the id of dragged item from its original position\r\n      newItemsIds.splice(source.index, 1);\r\n\r\n      // Insert the id of dragged item to the new position\r\n      newItemsIds.splice(destination.index, 0, draggableId);\r\n\r\n      // Create new, updated, object with data for columns\r\n      const newColumnStart = {\r\n        ...columnStart,\r\n        itemsIds: newItemsIds,\r\n      };\r\n\r\n      // Create new board state with updated data for columns\r\n      const newState = {\r\n        ...this.state.data,\r\n        columns: {\r\n          ...this.state.data.columns,\r\n          [newColumnStart.id]: newColumnStart,\r\n        },\r\n      };\r\n\r\n      // Update the board state with new data\r\n      this.setState({ data: newState });\r\n    } else {\r\n      // Moving items from one list to another\r\n      // Get all item ids in source list\r\n      const newStartItemsIds = Array.from(columnStart.itemsIds);\r\n\r\n      // Remove the id of dragged item from its original position\r\n      newStartItemsIds.splice(source.index, 1);\r\n\r\n      // Create new, updated, object with data for source column\r\n      const newColumnStart = {\r\n        ...columnStart,\r\n        itemsIds: newStartItemsIds,\r\n      };\r\n\r\n      // Get all item ids in destination list\r\n      const newFinishItemsIds = Array.from(columnFinish.itemsIds);\r\n\r\n      // Insert the id of dragged item to the new position in destination list\r\n      newFinishItemsIds.splice(destination.index, 0, draggableId);\r\n\r\n      // Create new, updated, object with data for destination column\r\n      const newColumnFinish = {\r\n        ...columnFinish,\r\n        itemsIds: newFinishItemsIds,\r\n      };\r\n\r\n      // Create new board state with updated data for both, source and destination columns\r\n      const newState = {\r\n        ...this.state.data,\r\n        columns: {\r\n          ...this.state.data.columns,\r\n          [newColumnStart.id]: newColumnStart,\r\n          [newColumnFinish.id]: newColumnFinish,\r\n        },\r\n      };\r\n\r\n      // Update the board state with new data\r\n      this.setState({ data: newState });\r\n    }\r\n  }\r\n  };\r\n  render() {\r\n    return (\r\n      <div>\r\n        <DragDropContext onDragEnd={this.onDragEnd}>\r\n            <Droppable droppableId=\"lalala\" direction=\"horizontal\">\r\n              {(provided, snapshot) => (\r\n                <BoardEl {...provided.droppableProps} ref={provided.innerRef}>\r\n                  {this.state.data.columnsOrder.map((columnId, index) => {\r\n                    // Get id of the current column\r\n                    const column = (this.state.data.columns as any)[columnId];\r\n\r\n                    // Get item belonging to the current column\r\n                    const items = column.itemsIds.map(\r\n                      (itemId: string) => (this.state.data.items as any)[itemId]\r\n                    );\r\n\r\n                    // Render the BoardColumn component\r\n                    return (\r\n                      <BoardColumn\r\n                        index={index}\r\n                        key={column.id}\r\n                        column={column}\r\n                        items={items}\r\n                        onkey={this.editContent}\r\n                      />\r\n                    );\r\n                  })}\r\n                  {provided.placeholder}\r\n                </BoardEl>\r\n              )}\r\n            </Droppable>\r\n            </DragDropContext>\r\n        <AddTask\r\n          submitOnClick={this.addNewTask}\r\n          onkeyup={(event) => {\r\n            if (event.key === \"Enter\") this.addNewTask();\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}